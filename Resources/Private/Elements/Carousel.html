{namespace flux=Tx_Flux_ViewHelpers}
{namespace v=Tx_Vhs_ViewHelpers}
<f:layout name="Content" />
<div xmlns="http://www.w3.org/1999/xhtml"
     xmlns:flux="http://fedext.net/ns/flux/ViewHelpers"
     xmlns:v="http://fedext.net/ns/vhs/ViewHelpers"
     xmlns:f="http://typo3.org/ns/fluid/ViewHelpers">

<f:section name="Configuration">
	<flux:flexform wizardTab="Bootstrap" id="bootstrap-carousel" label="Bootstrap: Image Carousel"
	               description="Images with captions placed in a carousel matrix with JS based image change."
	               icon="{v:extension.path.resources(extensionName: 'FluidcontentBootstrap', path: 'Icons/icon-twitter.png')}">
		<flux:flexform.field.input name="settings.carousel.interval" label="Interval between image changes, in miliseconds (default: 5000)" default="5000" eval="int,trim" />
		<flux:flexform.field.input name="settings.carousel.id" label="DOM element ID (override not necessary but possible)" default="{v:random.string(length: 8)}" />
		<flux:flexform.field.input name="settings.carousel.labelNext" label="Label: next" default="&rsaquo;" />
		<flux:flexform.field.input name="settings.carousel.labelPrev" label="Label: previous" default="&lsaquo;" />
		<flux:flexform.field.input name="settings.carousel.width" label="Image width, supports TS IMAGE widths, fx 250c to set width 250 with cropping" default="1170c" />
		<flux:flexform.sheet name="images" label="Images">
			<flux:flexform.section name="images" label="Images">
				<flux:flexform.object name="image" label="Image">
					<flux:flexform.field.file name="file" label="Image file" />
					<flux:flexform.field.input name="header" label="Optional header for caption" />
					<flux:flexform.field.text name="caption" label="Optional caption body text" enableRichText="TRUE" />
				</flux:flexform.object>
			</flux:flexform.section>
		</flux:flexform.sheet>
	</flux:flexform>
</f:section>

<f:section name="Preview">
	<p>Images: {images -> f:count()}</p>
</f:section>

<f:section name="Main">
	<div id="{settings.carousel.id}" class="carousel slide" data-interval="{settings.carousel.interval}">
		<ol class="carousel-indicators">
			<f:for each="{images}" as="image" iteration="iteration">
				<li data-target="#{settings.carousel.id}" data-slide-to="{iteration.index}" class="{f:if(condition: iteration.isFirst, then: 'active')}"></li>
			</f:for>
		</ol>
		<div class="carousel-inner">
			<f:for each="{images}" as="image" iteration="iteration">
				<div class="item{f:if(condition: iteration.isFirst, then: ' active')}">
					<f:image src="{image.image.file}" alt="{image.header}" width="{settings.carousel.width}" />
					<div class="carousel-caption">
						<f:if condition="{image.image.header}">
							<h4>{image.image.header -> f:format.html()}</h4>
						</f:if>
						<f:if condition="{image.image.caption}">
							{image.image.caption -> f:format.html()}
						</f:if>
					</div>
				</div>
			</f:for>
		</div>
		<f:if condition="{settings.carousel.labelPrev}">
			<a class="carousel-control left" href="#{settings.carousel.id}" data-slide="prev">{settings.carousel.labelPrev -> f:format.raw()}</a>
		</f:if>
		<f:if condition="{settings.carousel.labelNext}">
			<a class="carousel-control right" href="#{settings.carousel.id}" data-slide="next">{settings.carousel.labelNext -> f:format.raw()}</a>
		</f:if>
	</div>
</f:section>

</div>